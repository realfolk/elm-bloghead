<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Bloghead</title>
    <script type="text/javascript" src="/app.js"></script>
  </head>
  <body>
    <main id="main"></main>
    <script type="text/javascript">
      var DB_KEY = "bloghead_db";

      var app = Elm.Main.init({
        node: document.getElementById("main"),
        flags: JSON.parse(window.localStorage.getItem(DB_KEY) || "[]")
      });

      app.ports.persist.subscribe(function(dbData) {
        window.localStorage.setItem(DB_KEY, JSON.stringify(dbData));
      });
    </script>
  </body>
</html>
